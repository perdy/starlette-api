#!/usr/bin/env bash
set -e

NO_FORMAT="\033[0m"
C_RED1="\033[38;5;196m"

build_pkg()
{
  local arg="$1"
  if [ -z "$arg" ]; then
    cd templates
    echo "ðŸ”¥ Install js requirements..."
    npm i
    echo "ðŸ”¥ Build templates..."
    npm run build
    cd ..
    echo "ðŸ”¥ Build package:"
    poetry build
  elif [[ "$arg" == "-c" || "$arg" == "--clean" ]]; then
    sh "${PWD}/scripts/clean.sh"
    echo "ðŸ”¥ Build package:"
    poetry build
  else
    printf "%b" "ðŸš¨ ${C_RED1}Unknown argument:${NO_FORMAT} ${arg}\n"
  fi
}

build_pkg "$@"